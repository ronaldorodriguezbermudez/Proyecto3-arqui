{
  "version": 3,
  "sources": ["../../../../flat/index.js"],
  "sourcesContent": ["module.exports = flatten\r\nflatten.flatten = flatten\r\nflatten.unflatten = unflatten\r\n\r\nfunction isBuffer (obj) {\r\n  return obj &&\r\n    obj.constructor &&\r\n    (typeof obj.constructor.isBuffer === 'function') &&\r\n    obj.constructor.isBuffer(obj)\r\n}\r\n\r\nfunction keyIdentity (key) {\r\n  return key\r\n}\r\n\r\nfunction flatten (target, opts) {\r\n  opts = opts || {}\r\n\r\n  const delimiter = opts.delimiter || '.'\r\n  const maxDepth = opts.maxDepth\r\n  const transformKey = opts.transformKey || keyIdentity\r\n  const output = {}\r\n\r\n  function step (object, prev, currentDepth) {\r\n    currentDepth = currentDepth || 1\r\n    Object.keys(object).forEach(function (key) {\r\n      const value = object[key]\r\n      const isarray = opts.safe && Array.isArray(value)\r\n      const type = Object.prototype.toString.call(value)\r\n      const isbuffer = isBuffer(value)\r\n      const isobject = (\r\n        type === '[object Object]' ||\r\n        type === '[object Array]'\r\n      )\r\n\r\n      const newKey = prev\r\n        ? prev + delimiter + transformKey(key)\r\n        : transformKey(key)\r\n\r\n      if (!isarray && !isbuffer && isobject && Object.keys(value).length &&\r\n        (!opts.maxDepth || currentDepth < maxDepth)) {\r\n        return step(value, newKey, currentDepth + 1)\r\n      }\r\n\r\n      output[newKey] = value\r\n    })\r\n  }\r\n\r\n  step(target)\r\n\r\n  return output\r\n}\r\n\r\nfunction unflatten (target, opts) {\r\n  opts = opts || {}\r\n\r\n  const delimiter = opts.delimiter || '.'\r\n  const overwrite = opts.overwrite || false\r\n  const transformKey = opts.transformKey || keyIdentity\r\n  const result = {}\r\n\r\n  const isbuffer = isBuffer(target)\r\n  if (isbuffer || Object.prototype.toString.call(target) !== '[object Object]') {\r\n    return target\r\n  }\r\n\r\n  // safely ensure that the key is\r\n  // an integer.\r\n  function getkey (key) {\r\n    const parsedKey = Number(key)\r\n\r\n    return (\r\n      isNaN(parsedKey) ||\r\n      key.indexOf('.') !== -1 ||\r\n      opts.object\r\n    ) ? key\r\n      : parsedKey\r\n  }\r\n\r\n  function addKeys (keyPrefix, recipient, target) {\r\n    return Object.keys(target).reduce(function (result, key) {\r\n      result[keyPrefix + delimiter + key] = target[key]\r\n\r\n      return result\r\n    }, recipient)\r\n  }\r\n\r\n  function isEmpty (val) {\r\n    const type = Object.prototype.toString.call(val)\r\n    const isArray = type === '[object Array]'\r\n    const isObject = type === '[object Object]'\r\n\r\n    if (!val) {\r\n      return true\r\n    } else if (isArray) {\r\n      return !val.length\r\n    } else if (isObject) {\r\n      return !Object.keys(val).length\r\n    }\r\n  }\r\n\r\n  target = Object.keys(target).reduce(function (result, key) {\r\n    const type = Object.prototype.toString.call(target[key])\r\n    const isObject = (type === '[object Object]' || type === '[object Array]')\r\n    if (!isObject || isEmpty(target[key])) {\r\n      result[key] = target[key]\r\n      return result\r\n    } else {\r\n      return addKeys(\r\n        key,\r\n        result,\r\n        flatten(target[key], opts)\r\n      )\r\n    }\r\n  }, {})\r\n\r\n  Object.keys(target).forEach(function (key) {\r\n    const split = key.split(delimiter).map(transformKey)\r\n    let key1 = getkey(split.shift())\r\n    let key2 = getkey(split[0])\r\n    let recipient = result\r\n\r\n    while (key2 !== undefined) {\r\n      if (key1 === '__proto__') {\r\n        return\r\n      }\r\n\r\n      const type = Object.prototype.toString.call(recipient[key1])\r\n      const isobject = (\r\n        type === '[object Object]' ||\r\n        type === '[object Array]'\r\n      )\r\n\r\n      // do not write over falsey, non-undefined values if overwrite is false\r\n      if (!overwrite && !isobject && typeof recipient[key1] !== 'undefined') {\r\n        return\r\n      }\r\n\r\n      if ((overwrite && !isobject) || (!overwrite && recipient[key1] == null)) {\r\n        recipient[key1] = (\r\n          typeof key2 === 'number' &&\r\n          !opts.object ? [] : {}\r\n        )\r\n      }\r\n\r\n      recipient = recipient[key1]\r\n      if (split.length > 0) {\r\n        key1 = getkey(split.shift())\r\n        key2 = getkey(split[0])\r\n      }\r\n    }\r\n\r\n    // unflatten again for 'messy objects'\r\n    recipient[key1] = unflatten(target[key], opts)\r\n  })\r\n\r\n  return result\r\n}\r\n"],
  "mappings": "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",
  "names": ["target", "result"]
}
